# NFT Event Listener æ¡†æ¶ ğŸ¨

ä¸€ä¸ªåŸºäºViemæ¡†æ¶ç”¨äºç›‘å¬NFTå¸‚åœºåˆçº¦äº‹ä»¶çš„Node.jsæ¡†æ¶ã€‚

## ğŸ“‹ æ¡†æ¶ç»“æ„

```
nft-event-listener/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ config.js          # åŸºç¡€é…ç½®ï¼ˆæ”¯æŒViemé“¾ï¼‰
â”‚   â”œâ”€â”€ handlers/
â”‚   â”‚   â””â”€â”€ nftMarketEventHandler.js  # äº‹ä»¶å¤„ç†æ¡†æ¶ï¼ˆViemç‰ˆæœ¬ï¼‰
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ events.js          # äº‹ä»¶ç±»å‹å®šä¹‰ï¼ˆé€‚é…Viemï¼‰
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ logger.js          # ç®€å•æ—¥å¿—å·¥å…·
â”‚   â””â”€â”€ index.js               # åº”ç”¨å…¥å£ï¼ˆä½¿ç”¨Viemï¼‰
â”œâ”€â”€ .env.example              # ç¯å¢ƒå˜é‡æ¨¡æ¿ï¼ˆViemé…ç½®ï¼‰
â”œâ”€â”€ package.json              # é¡¹ç›®é…ç½®ï¼ˆviemä¾èµ–ï¼‰
â””â”€â”€ start.sh                  # å¯åŠ¨è„šæœ¬
```

## ğŸ¯ ç›‘å¬çš„äº‹ä»¶æ¡†æ¶

- **NFTListed** - NFTä¸Šæ¶äº‹ä»¶
- **NFTSold** - NFTå”®å‡ºäº‹ä»¶  
- **TokensReceived** - ä»£å¸æ¥æ”¶äº‹ä»¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

1. å®‰è£…ä¾èµ–ï¼š`npm install`
2. é…ç½®ç¯å¢ƒï¼š`cp .env.example .env`
3. ç¼–è¾‘.envæ–‡ä»¶ï¼Œå¡«å…¥RPC_URLå’ŒNFT_MARKET_ADDRESS
4. å¯åŠ¨ï¼š`./start.sh dev`

## ğŸ”§ Viemæ¡†æ¶ç‰¹æ€§

- âœ… **ç±»å‹å®‰å…¨** - å®Œæ•´çš„TypeScriptæ”¯æŒ
- âœ… **ç°ä»£åŒ–API** - ä½¿ç”¨createPublicClientå’ŒwatchContractEvent
- âœ… **æ€§èƒ½ä¼˜åŒ–** - æ›´é«˜æ•ˆçš„äº‹ä»¶ç›‘å¬å’Œå¤„ç†
- âœ… **é“¾é…ç½®** - å†…ç½®é“¾é…ç½®æ”¯æŒï¼ˆsepolia, mainnetç­‰ï¼‰
- âœ… **çµæ´»ä¼ è¾“** - æ”¯æŒHTTPå’ŒWebSocketä¼ è¾“

## ğŸ”§ å¼€å‘è¯´æ˜

è¿™æ˜¯ä¸€ä¸ªçº¯æ¡†æ¶ï¼Œæ‰€æœ‰ä¸šåŠ¡é€»è¾‘éƒ½éœ€è¦æ‚¨è‡ªå·±å®ç°ï¼š

- åœ¨`src/handlers/nftMarketEventHandler.js`ä¸­å®ç°äº‹ä»¶å¤„ç†é€»è¾‘
- åœ¨`src/index.js`ä¸­å®ç°Viemå®¢æˆ·ç«¯è¿æ¥å’Œåˆå§‹åŒ–é€»è¾‘
- æ ¹æ®éœ€è¦æ‰©å±•é…ç½®æ–‡ä»¶å’Œæ—¥å¿—åŠŸèƒ½

## ğŸ“ ä¸»è¦TODOé¡¹

- ä½¿ç”¨`createPublicClient`åˆå§‹åŒ–Viemå®¢æˆ·ç«¯
- ä½¿ç”¨`watchContractEvent`è®¢é˜…å®æ—¶äº‹ä»¶
- ä½¿ç”¨`getLogs`è·å–å†å²äº‹ä»¶
- å®ç°äº‹ä»¶å¤„ç†ä¸šåŠ¡é€»è¾‘
- æ·»åŠ é”™è¯¯å¤„ç†å’Œé‡è¿æœºåˆ¶

æ‰€æœ‰TODOæ³¨é‡Šæ ‡è®°çš„åœ°æ–¹éƒ½éœ€è¦æ‚¨æ·»åŠ å…·ä½“å®ç°ã€‚